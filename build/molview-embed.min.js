/*! MolView JavaScript Embed build on 2017-02-26 */
var Loader={PubChem:{loadCID:function(a,b){Progress.reset(3),b=b.charAt(0).toUpperCase()+b.slice(1),Messages.process(function(){Request.PubChem.sdf(a,!1,function(a){Model.loadMOL(a),document.title=b||"MolView",Progress.complete(),Messages.clear()},function(){Progress.increment(),Request.PubChem.properties(a,"IsomericSMILES",function(a){Progress.increment(),Request.CIR.resolve(a.PropertyTable.Properties[0].IsomericSMILES,!1,function(a){Model.loadMOL(a),document.title=b||"MolView",Progress.complete(),Messages.clear()},function(){Messages.alert("load_fail")})},function(){Messages.alert("load_fail")})})},"compound")}},RCSB:{loadPDBID:function(a,b){function c(){document.title=b||a.toUpperCase(),Progress.complete(),Messages.clear()}Progress.reset(2),Messages.process(function(){Progress.increment(),Request.RCSB.PDB(a,function(a){Detector.webgl?Model.isGLmol()?(Model.loadPDB(a),c()):(Model.preloadPDB(a),Model.setRenderEngine("GLmol",c)):MolView.mobile?Messages.alert("mobile_old_no_macromolecules"):Model.isJSmol()?(Model.loadPDB(a),c()):(Model.preloadPDB(a),Model.setRenderEngine("JSmol",c))},function(){Messages.alert("load_fail")})},"macromolecule")}},COD:{loadCODID:function(a,b){Progress.reset(2),Messages.process(function(){Progress.increment(),Request.COD.CIF(a,function(c){Model.loadCIF(c),document.title=b||"COD: "+a,Progress.complete(),Messages.clear()},function(){Messages.alert("load_fail")})},"crystal")}},loadSMILES:function(a,b){return Request.CIR.available?(Progress.reset(2),void Request.resolve(a,0,!1,function(a,c){Model.loadMOL(a),Progress.complete(),Messages.clear(),document.title=b||"MolView"},function(){Messages.alert("load_fail")})):void Messages.alert("cir_down")}},MolView={touch:!1,mobile:!1,devicePixelRatio:1,trigger:"click",query:{},loadDefault:!0,JMOL_J2S_PATH:"jmol/j2s",init:function(){MolView.devicePixelRatio=window.devicePixelRatio||(MolView.mobile?1.5:1),this.query=getQuery(),Model.preloadQuery(this.query),(this.query.q||this.query.smiles||this.query.cid||this.query.pdbid||this.query.codid)&&(this.loadDefault=!1),Progress.init(),this.loadDefault&&Progress.reset(2),Request.init(),$(window).on("resize",Model.resize.bind(Model)),Progress.increment(),this.touch&&!Detector.webgl&&Model.JSmol.setQuality(!1),Model.init(function(){$.each(this.query,function(a,b){"smiles"===a?Messages.process(function(){Loader.loadSMILES(b,document.title)},"compound"):"cid"===a?Loader.PubChem.loadCID(b,document.title):"pdbid"===a?Loader.RCSB.loadPDBID(b,b.toUpperCase()):"codid"===a?Loader.COD.loadCODID(b,document.title):"bg"===a&&Model.setBackground(b)}),this.query.smiles||this.query.cid||this.query.pdbid||this.query.codid||Progress.complete()}.bind(this),Detector.webgl?"GLmol":this.query.pdbid&&!MolView.mobile||this.query.codid?"JSmol":"GLmol")},makeModelVisible:function(){}};$(document).on("ready",function(){MolView.init()});
